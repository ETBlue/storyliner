{"version":3,"sources":["App/logo.svg","_shared/SETTINGS.js","_shared/storage.js","App/COLORS.js","_shared/getFieldGroup.js","_shared/LABELS.js","Sidebar/Sidebar.js","Home/Home.js","Header/Header.js","Footer/Footer.js","Timeline/Filter.js","Timeline/LabelSet.js","Timeline/Relation.js","Timeline/Location.js","Timeline/QuoteList.js","Timeline/Event.js","Timeline/getRefMsg.js","Timeline/isLocationAvailable.js","Timeline/isMediaAvailable.js","Timeline/MenuYearMark.js","Timeline/MenuItem.js","Timeline/Timeline.js","_shared/getEventIndex.js","Timeline/isEventListed.js","Timeline/isEventStaged.js","Timeline/isEventInViewPort.js","Timeline/isFirstEventOfYear.js","App/parseCsvArray.js","App/isLabel.js","App/getDateTime.js","App/updateStorage.js","App/getVisibleEventIDs.js","App/isInViewport.js","App/App.js","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","SETTINGS","title","subtitle","baseUrl","query","titleRowIndex","headerRowIndex","storage","window","localStorage","getItem","setItem","JSON","stringify","getFieldGroup","_ref","event","field","fieldGroup","i","concat","push","LABELS","withRouter","props","attributes","href","className","location","search","onClick","onCurrentClick","style","cursor","sorted","history","parse","Object","keys","forEach","key","index","time","sort","a","b","historyJSX","map","item","react_default","createElement","assign","margin","Home","state","input","undefined","handleInputChange","e","_this","setState","target","value","handleSourceSubmit","destinationUrl","pathname","queryString","source","console","log","type","placeholder","onChange","this","autoFocus","marginBottom","rel","React","Component","Header_Header","logo","onIconClick","onLogoClick","icon","status","display","flex","src","alt","flexGrow","Footer_Footer","Filter","filter","setFilter","LabelSet","label","size","sla","set","length","backgroundColor","labelColor","Relation","subjectFields","objectFields","action","topic","Location","locationFields","QuoteList","quotes","quotesJSX","quote","quoteIndex","Author","author","content","Event","eventIndex","isActive","refEventIndex","refEvent","refEventTitle","isQuoteExists","isEventReferenced","queries","ref","toString","refMeUrl","hash","id","timeTo","msg","momentDate","to","isBefore","isAfter","getRefMsg","year","month","date","react_router_dom","location_1","isLocationAvailable","channel","channel_carrier","isMediaAvailable","channel_prep","content_carrier","ref_url","ref_title","description","note","MenuYearMark","isStaged","isInViewPort","MenuItem","Menu","EventList","parseInt","isNaN","events","join","replace","allLabels","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","labelFields","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isEventListed","firstStagedEventIndex","lastStagedEventIndex","isEventStaged","visibleEventIDs","includes","isEventInViewPort","prevEvent","isFirstEventOfYear","handleContextRef","es","context","contextRef","scrollReset","float","opacity","COLORS","parseCsvArray","lines","titles","headers","labels","Set","line","lineIndex","column","columnIndex","header","split","isLabel","add","polishedEvent","moment","isStandard","getDateTime","colors","delete","Math","floor","random","color","Array","from","updateStorage","entry","Date","now","match","getVisibleEventIDs","eventElements","visibleIDs","elem","elemTop","offsetTop","elemBottom","offsetHeight","viewportTop","scrollY","viewportBottom","innerHeight","isInViewport","App","isLoaded","showSidebar","startApp","decodeURIComponent","fetchData","Papa","download","complete","result","_parseCsvArray","data","document","getElementsByClassName","updateVisibleEventIDs","setTimeout","error","toggleSidebar","prevState","direction","scrollTo","body","scrollHeight","character","_this2","addEventListener","prevProps","_this3","prevSource","newQueries","isAvailable","left","src_Sidebar_Sidebar","src_Timeline_Timeline","src_Home_Home","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","basename","src_App_App","getElementById","URL","process","origin","fetch","response","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.0fbbf4e1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","export default {\n  title: 'Storyliner',\n  subtitle: 'The Interactive Gossip Viewer',\n  baseUrl: '/storyliner',\n  query: '?source=',\n  titleRowIndex: 0,\n  headerRowIndex: 1\n}\n","import SETTINGS from './SETTINGS'\n\nconst storage = window.localStorage\nif (!storage.getItem(SETTINGS.title)) {\n  storage.setItem(SETTINGS.title, JSON.stringify({}))\n}\n\nexport default storage\n","const COLORSPACE = 30\nconst COLORS = []\nfor (let i = 0; i < 360 / COLORSPACE; i++) {\n  COLORS.push(i * COLORSPACE)\n}\n\nexport default COLORS\n","export default ({event, field}) => {\n  const fieldGroup = [field]\n  for (let i = 1; event[`${field}_${i}`]; i++) {\n    fieldGroup.push(`${field}_${i}`)\n  }\n  return fieldGroup\n}\n","export default [\n  'subject',\n  'object',\n  'location'\n]\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\n\nimport {SETTINGS, storage} from '../_shared'\n\nimport './Sidebar.css'\n\nconst Sidebar = (props) => {\n\n  let attributes = {\n    href: SETTINGS.baseUrl,\n    className: 'item'\n  }\n  if (props.location.search === '') {\n    attributes = {\n      className: 'active item',\n      onClick: props.onCurrentClick,\n      style: {cursor: 'default'}\n    }\n  }\n\n  let sorted = []\n  const history = JSON.parse(storage.getItem(SETTINGS.title))\n  Object.keys(history).forEach((key, index) => {\n    sorted.push({\n      key: key,\n      title: history[key].title,\n      subtitle: history[key].subtitle,\n      time: history[key].time\n    })\n  })\n  sorted.sort((a, b) => {\n    return b.time - a.time\n  })\n\n  const historyJSX = sorted.map((item, index) => {\n\n    let attributes = {\n      href: `${SETTINGS.baseUrl}/${SETTINGS.query}${item.key}`,\n      className: 'item'\n    }\n    if (props.location.search === `${SETTINGS.query}${item.key}`) {\n      attributes = {\n        className: 'active item',\n        onClick: props.onCurrentClick,\n        style: {cursor: 'default'}\n      }\n    }\n\n    return (\n      <a key={item.key} {...attributes} >\n        <span className='ui small header'>\n        {item.title}\n          <span className='sub header'>\n          {item.subtitle}\n          </span>\n        </span>\n      </a>\n    )\n  })\n\n  return (\n    <aside className='Sidebar'>\n      <h1 className='ui header'>\n        <span className='App-name' >\n          {SETTINGS.title}\n        </span>\n        <div className='sub header App-description'>\n          {SETTINGS.subtitle}\n        </div>\n      </h1>\n      <nav className='ui vertical secondary fluid menu' style={{margin: '0'}} >\n      <a {...attributes} >\n        <i className='icon home' />\n        Home\n      </a>\n      {historyJSX}\n      </nav>\n    </aside>\n  )\n}\n\nexport default withRouter(Sidebar)\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\nimport queryString from 'query-string'\n\nimport './Home.css'\n\nclass Home extends React.Component {\n  state = {\n    input: undefined,\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      input: e.target.value\n    })\n  }\n\n  handleSourceSubmit = () => {\n    const destinationUrl = `${this.props.location.pathname}?${queryString.stringify({source: this.state.input})}`\n    console.log(this.props.location.pathname)\n    console.log(destinationUrl)\n    this.props.history.push(destinationUrl)\n  }\n\n  render () {\n    return (\n      <section className='Home' >\n        <div className='ui fluid action input' >\n          <input type='text' placeholder='Your data source here... (.csv file)'\n            onChange={this.handleInputChange} value={this.state.input || ''} autoFocus />\n          <button className='ui teal button' onClick={this.handleSourceSubmit}>Submit</button>\n        </div>\n        <hr className='ui hidden section divider' />\n        <div className='ui center aligned basic segment'>\n          <h2 className='ui bottom pointing black label' style={{marginBottom: '2rem'}} >\n            Create your own .csv file in 1 minute!\n          </h2>\n          <hr className='ui hidden fitted divider' />\n          <span className='ui horizontal black label'>Step 1</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Make a copy\n            <div className='sub header'>\n              of this <a href='https://docs.google.com/spreadsheets/d/1w8IAAl2JZhqpmLIxJ8GWNO6KT0CQxM4wCnnIPpGvLPM/edit?usp=sharing' target='_blank' rel='noopener noreferrer'>Google Spreadsheet</a>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 2</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Publish it by clicking\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>File</code> > <code className='ui horizontal basic label'>Publish to the web...</code>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 3</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Select the format of\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>Comma-seperated values (.csv)</code>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 4</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Click the\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>Publish</code> button\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 5</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Copy the provided URL\n            <div className='sub header'>\n              and paste here\n            </div>\n          </h3>\n          <h3 className='ui top pointing black label'>\n            And you are done!\n          </h3>\n        </div>\n      </section>\n    )\n  }\n}\n\nexport default withRouter(Home)\n","import React from 'react'\n\nimport './Header.css'\n\nexport default ({logo, title, subtitle, onIconClick, onLogoClick, status}) => {\n  let icon = 'redo'\n  switch (status) {\n    case 'success':\n      icon = 'green check'\n      break\n    case 'loading':\n      icon = 'blue spinner'\n      break\n    case 'invalid':\n      icon = ''\n      break\n    case 'error':\n      icon = 'red exclamation triangle'\n      break\n    default:\n      icon = 'redo'\n  }\n  return (\n    <header className='Header'>\n      <div className='wrapper ui container' style={{display: 'flex'}} >\n        <span style={{flex: 'none'}}>\n          <img src={logo} alt=\"logo\" className='ui image App-logo' onClick={onLogoClick}/>\n        </span>\n        <h1 className=\"ui header\" style={{flexGrow: '1', margin: '0'}} >\n          <span className='App-name' >\n            {title}\n          </span>\n          <div className='sub header App-description'>\n            {subtitle}\n          </div>\n        </h1>\n        <div style={{flex: 'none'}} >\n          { icon === '' ? null : (<i className={`icon ${icon}`} onClick={onIconClick} />)}\n        </div>\n      </div>\n    </header>\n  )\n}\n","import React from 'react'\n\nimport './Footer.css'\n\nexport default () => (\n  <footer className='Footer' >\n    <div className='ui center aligned container'>\n      <div className='wrapper'>\n        <p>\n        Yet another open data experiment by ETBlue.\n        <br />\n        <a href='https://github.com/ETBlue/storyliner' target='_blank' rel='noopener noreferrer'>\n          <i className='icon code' />\n          Source code\n        </a>\n        <a href='https://etblue.github.io/storyliner/?source=https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8ukLhLNcPLc20_7J2ju6_e_KSLW2RW0LDu_1_4__IvaVUCO1BhZ9RGwefcWkOVRQ8XjlYv6MSe8oA/pub?output=csv'>\n          <i className='icon globe' />\n          Sample page\n        </a>\n        <a href='https://docs.google.com/spreadsheets/d/1w8IAAl2JZhqpmLIxJ8GWNO6KT0CQxM4wCnnIPpGvLPM/edit?usp=sharing' target='_blank' rel='noopener noreferrer'>\n          <i className='icon table' />\n          Sample data\n        </a>\n        <br />\n        <a href='https://etblue.blogspot.com/2018/04/storyliner-interactive-gossip-viewer.html' target='_blank' rel='noopener noreferrer'>\n          <i className='icon blogger b' />\n          Release note\n        </a>\n        <a href='https://twitter.com/ETBlue/status/981475770836049922' target='_blank' rel='noopener noreferrer'>\n          <i className='icon twitter' />\n          Dev log\n        </a>\n        <a href='https://www.facebook.com/ETBlue/media_set?set=a.10212507248088923.1073741901.1014354995' target='_blank' rel='noopener noreferrer'>\n          <i className='icon facebook f' />\n          Dev log\n        </a>\n        <a href='https://www.playpcesor.com/2018/04/storyliner-google.html' target='_blank' rel='noopener noreferrer'>\n          <i className='icon blogger b' />\n          Tutorial (by 電腦玩物)\n        </a>\n        </p>\n      </div>\n    </div>\n  </footer>\n)","import React from 'react'\n\nexport default ({filter, setFilter}) => {\n  return (\n    <div className='Filter ui two column stackable grid'>\n      <div className='eleven wide column'>\n        <p className='Filter-message'>\n          Filtered by\n          <span className='ui horizontal label' style={{margin: '0 0.5rem'}} >\n            {filter}\n            <i className='icon delete'\n              onClick={() => setFilter(filter)} />\n          </span>\n        </p>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nexport default ({event, label, props, size, sla}) => {\n  const set = []\n  if (event[`${label}_prep`] && event[`${label}_prep`].length > 0) {\n    set.push(\n      <span key={`${label}_prep`}>\n        {event[`${label}_prep`]}\n      </span>\n    )\n  }\n  if (event[label] && event[label].length > 0) {\n    set.push(\n      <span key={label} className={`ui ${size} horizontal label`}\n        style={{backgroundColor: `hsla(${props.labelColor[event[label]]}, ${sla})`}}\n        onClick={() => props.setFilter(event[label])} >\n        {event[label]}\n      </span>\n    )\n  }\n  return set\n}\n","import React from 'react'\n\nimport {getFieldGroup} from '../_shared'\n\nimport LabelSet from './LabelSet'\n\nexport default ({event, props}) => {\n  const subjectFields = getFieldGroup({event, field: 'subject'})\n  const objectFields = getFieldGroup({event, field: 'object'})\n  return (\n    <p className='Relation'>\n      {\n        subjectFields.map((field) => <LabelSet key={field} event={event} label={field} size='large' sla='50%, 50%, 0.3' props={props} />)\n      }\n      {event.action && event.action.length > 0 ? (\n        <span>\n          {event.action}\n        </span>\n      ) : null}\n      {\n        objectFields.map((field) => <LabelSet key={field} event={event} label={field} size='large' sla='50%, 50%, 0.3' props={props} />)\n      }\n      {event.topic && event.topic.length > 0 ? (\n        <span>\n          {event.topic}\n        </span>\n      ) : null}\n    </p>\n  )\n}\n","import React from 'react'\n\nimport {getFieldGroup} from '../_shared'\n\nimport LabelSet from './LabelSet'\n\nexport default ({event, props}) => {\n  const locationFields = getFieldGroup({event, field: 'location'})\n  return (\n    <p className='Locaiton description'>\n      {\n        locationFields.map((field) => <LabelSet key={field} event={event} label={field} size='small' sla='20%, 70%, 0.3' props={props} />)\n      }\n    </p>\n  )\n}\n","import React from 'react'\n\nexport default ({quotes}) => {\n  const quotesJSX = quotes.map((quote, quoteIndex) => {\n    let Author = null\n\n    if (quote.author.length > 0) {\n      if (!quotes[quoteIndex + 1] || quote.author !== quotes[quoteIndex + 1].author) {\n        Author = <p className='Author'>— {quote.author}</p>\n      }\n    }\n\n    return (\n      <blockquote key={quoteIndex} >\n        <i className='quote left icon' />\n        <i className='quote right icon' />\n        {quote.content}\n        {Author}\n      </blockquote>\n    )\n  })\n\n  return (\n    <div className='ui secondary segment'>\n      {quotesJSX}\n    </div>\n  )\n}\n","import React from 'react'\nimport {Link} from 'react-router-dom'\nimport queryString from 'query-string'\n\nimport Relation from './Relation'\nimport Location from './Location'\nimport QuoteList from './QuoteList'\nimport isMediaAvailable from './isMediaAvailable'\nimport isLocationAvailable from './isLocationAvailable'\nimport getRefMsg from './getRefMsg'\n\nexport default ({event, eventIndex, isActive, props, refEventIndex, refEvent, refEventTitle}) => {\n  const isQuoteExists = event.quote && event.quote.length > 0\n  const isEventReferenced = refEventIndex === eventIndex\n  const queries = Object.assign({}, props.queries)\n  if (isEventReferenced) {\n    delete queries.ref\n  } else {\n    queries.ref = eventIndex.toString()\n  }\n  const refMeUrl = `${props.location.pathname}?${queryString.stringify(queries)}${props.location.hash}`\n  return (\n    <article key={eventIndex} id={eventIndex} className='Event' >\n      <div className='ui two column stackable grid' >\n        <div className='eleven wide column'>\n          {refEvent && !isEventReferenced ? (\n            <div className='reference'>\n              <div className='text'>\n                {getRefMsg({event, refEvent, refEventTitle})}\n              </div>\n            </div>\n          ) : null}\n          <div className={`Event-block ui segments ${isActive ? 'active' : ''}`}>\n            <div className='ui segment'>\n              <a className='Timestamp' href={`#${eventIndex}`}>\n                {event.year}-{event.month}-{event.date} {event.time || null}\n              </a>\n              <Link to={refMeUrl} className='RefMeButton ui basic mini icon button'>\n                <i className={`${isEventReferenced ? 'teal' : ''} icon thumbtack`} />\n              </Link>\n              <Relation event={event} props={props} />\n              {isLocationAvailable({event}) ? (\n                <Location event={event} props={props} />\n              ) : null}\n              {isMediaAvailable({event}) ? (\n                <p className='description'>\n                  {event.channel_prep}{event.channel}{event.content_carrier} — <a href={event.ref_url} target='_blank' rel='noopener noreferrer'>\n                    {event.ref_title && event.ref_title.length > 0 ? event.ref_title : event.ref_url}\n                  </a>\n                </p>\n              ) : null}\n              {event.description ? (\n                <p className='description'>\n                  {event.description}\n                </p>\n              ) : null}\n            </div>\n            {isQuoteExists ? (\n              <QuoteList quotes={event.quote} />\n            ) : null}\n          </div>\n        </div>\n        {event.note && event.note.length > 0 ? (\n          <div className='five wide column'>\n            <div className='Note'>\n              <div className='ui horizontal fitted divider'>\n                <i className='icon coffee' />\n              </div>\n              <p className='Note-content'>\n                {event.note}\n              </p>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </article>\n  )\n}\n","export default ({event, refEvent, refEventTitle}) => {\n  const msg = event.momentDate.to(refEvent.momentDate, true)\n  let timeTo\n  if (event.momentDate.isBefore(refEvent.momentDate)) {\n    timeTo = `${msg} before`\n  } else if (event.momentDate.isAfter(refEvent.momentDate)) {\n    timeTo = `${msg} after`\n  } else {\n    timeTo = 'same day as'\n  }\n  return `${timeTo} ${refEventTitle}`\n}\n","export default ({event}) => {\n  return (event.location && event.location.length > 0) || (event.location_1 && event.location_1.length > 0)\n}\n","export default ({event}) => {\n  return (event.channel && event.channel.length > 0) || (event.channel_carrier && event.channel_carrier.length > 0)\n}\n","import React from 'react'\n\nexport default ({year, eventIndex, isStaged, isInViewPort}) => {\n  return (\n    <div key={`year-of-${eventIndex}`}\n      className={`MenuYearMark item ${isStaged ? '' : 'not-staged'} ${isInViewPort ? 'in-viewport' : ''}`}>\n      {year}\n    </div>\n  )\n}\n","import React from 'react'\n\nexport default ({eventIndex, isActive, isInViewPort, isStaged, month, date, time}) => {\n  return (\n    <a key={eventIndex} href={`#${eventIndex}`}\n      className={`MenuItem item ${isActive ? 'active' : ''} ${isInViewPort ? 'in-viewport' : ''} ${isStaged ? '' : 'not-staged'}`}>\n      {`${month}/${date}`}\n      {time ? (\n        <span className='Time'>\n          {time}\n        </span>\n      ) : null}\n    </a>\n  )\n}\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\nimport {Sticky} from 'semantic-ui-react'\n\nimport {getEventIndex} from '../_shared'\n\nimport isEventListed from './isEventListed'\nimport isEventInViewPort from './isEventInViewPort'\nimport isEventStaged from './isEventStaged'\nimport isFirstEventOfYear from './isFirstEventOfYear'\nimport Filter from './Filter'\nimport Event from './Event'\nimport MenuYearMark from './MenuYearMark'\nimport MenuItem from './MenuItem'\nimport './Timeline.css'\n\nconst Timeline = (props) => {\n  // get ready to set up page body\n  const Menu = []\n  const EventList = []\n\n  const refEventIndex = parseInt(props.queries.ref, 10)\n  const refEvent = !isNaN(refEventIndex) ? props.events[refEventIndex] : null\n  const fields = ['subject', 'subject_1_prep', 'subject_1', 'action', 'object', 'object_1_prep', 'object_1', 'topic']\n  const refEventTitle = refEvent ? fields.map((field) => refEvent[field]).join('') : null\n\n  // render relations\n  props.events.forEach((event, eventIndex) => {\n    if (!event.date) {\n      return null\n    }\n\n    const isActive = getEventIndex(props.location.hash) === eventIndex\n\n    if (isEventListed({filter: props.filter, event})) {\n      EventList.push(\n        <Event key={eventIndex} eventIndex={eventIndex} event={event}\n          isActive={isActive} props={props}\n          refEventIndex={refEventIndex} refEvent={refEvent} refEventTitle={refEventTitle} />\n      )\n    }\n    const isStaged = isEventStaged({firstStagedEventIndex: props.firstStagedEventIndex, lastStagedEventIndex: props.lastStagedEventIndex, eventIndex})\n    const isInViewPort = isEventInViewPort({visibleEventIDs: props.visibleEventIDs, eventIndex})\n    if (eventIndex === 0) {\n      Menu.push(\n        <MenuYearMark key={`year-of-${eventIndex}`} eventIndex={eventIndex}\n          isInViewPort={isInViewPort}\n          isStaged={isStaged}\n          year={event.year} />\n      )\n    } else if (isFirstEventOfYear({events: props.events, eventIndex})) {\n      Menu.push(\n        <MenuYearMark key={`year-of-${eventIndex}`} eventIndex={eventIndex}\n          isInViewPort={isInViewPort}\n          isStaged={isStaged}\n          year={event.year} />\n      )\n    }\n\n    Menu.push(\n      <MenuItem key={eventIndex} eventIndex={eventIndex}\n        isActive={isActive}\n        isInViewPort={isInViewPort}\n        isStaged={isStaged}\n        month={event.month} date={event.date} time={event.time} />\n    )\n  })\n\n  return (\n    <div className='Body'>\n      <div className='Menu-wrapper' ref={props.handleContextRef}>\n        <Sticky context={props.contextRef}>\n          <nav className='ui vertical fluid secondary mini pointing pink menu'>\n            <span className='item' style={{cursor: 'pointer'}}\n              onClick={() => props.scrollReset('top')} >\n              <i className='icon up chevron' style={{float: 'none', opacity: '0.5'}} />\n            </span>\n            {Menu}\n            <span className='item' style={{cursor: 'pointer'}}\n              onClick={() => props.scrollReset('bottom')} >\n              <i className='icon down chevron' style={{float: 'none', opacity: '0.5'}} />\n            </span>\n          </nav>\n        </Sticky>\n      </div>\n      <div className='Event-wrapper'>\n        {props.filter.length > 0 ? (\n          <Filter {...props} />\n        ) : null}\n        {EventList}\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(Timeline)\n","export default (hash) => {\n  return parseInt(hash.replace('#', ''), 10)\n}\n","import {LABELS, getFieldGroup} from '../_shared'\n\nexport default ({filter, event}) => {\n  if (filter.length === 0) {\n    return true\n  }\n\n  let allLabels = []\n  for (const label of LABELS) {\n    const labelFields = getFieldGroup({event, field: label})\n    allLabels = allLabels.concat(labelFields)\n  }\n\n  for (const label of allLabels) {\n    if (filter === event[label]) {\n      return true\n    }\n  }\n\n  return false\n}\n","export default ({firstStagedEventIndex, lastStagedEventIndex, eventIndex}) => {\n  return eventIndex >= firstStagedEventIndex && eventIndex <= lastStagedEventIndex\n}\n","export default ({visibleEventIDs, eventIndex}) => {\n  return visibleEventIDs.includes(eventIndex)\n}\n","export default ({events, eventIndex}) => {\n  const event = events[eventIndex]\n  const prevEvent = events[eventIndex - 1]\n  return event.year !== prevEvent.year\n}\n","import {SETTINGS} from '../_shared'\n\nimport getDateTime from './getDateTime'\nimport isLabel from './isLabel'\nimport COLORS from './COLORS'\n\nexport default (lines) => {\n  const titles = lines[SETTINGS.titleRowIndex]\n  const title = titles[0]\n  const subtitle = titles[1]\n\n  const events = []\n  const headers = lines[SETTINGS.headerRowIndex]\n  const labels = new Set()\n\n  lines.forEach((line, lineIndex) => {\n    if (lineIndex <= SETTINGS.headerRowIndex) {\n      return\n    }\n\n    const event = {quote: []}\n    let author = ''\n    line.forEach((column, columnIndex) => {\n      const header = headers[columnIndex]\n      switch (header) {\n        case 'quote_author':\n          author = column || ''\n          break\n        case 'quote_content':\n          if (column && column.length > 0) {\n            column.split('\\n').forEach((quote) => {\n              event.quote.push({\n                author,\n                content: quote\n              })\n            })\n          }\n          break\n        case 'via':\n          // alias from old version\n          event.channel_prep = column || ''\n          break\n        case 'content_topic':\n          // alias from old version\n          event.topic = column || ''\n          break\n        default:\n          event[header] = column || ''\n          if (isLabel(header)) {\n            labels.add(column)\n          }\n      }\n    })\n    if (event.date.length === 0) {\n      // when the date colume is empty, merge quotes into latest object\n      events[events.length - 1].quote = events[events.length - 1].quote.concat(event.quote)\n    } else {\n      const polishedEvent = Object.assign(event, getDateTime(event))\n      events.push(polishedEvent)\n    }\n  })\n\n  const labelColor = {}\n  let colors = new Set(COLORS)\n  labels.delete('')\n  labels.forEach((label) => {\n    const index = Math.floor(Math.random() * colors.size)\n    const color = Array.from(colors)[index]\n    labelColor[label] = color\n    colors.delete(color)\n    if (colors.size === 0) {\n      colors = new Set(COLORS)\n    }\n  })\n\n  return {title, subtitle, events, labelColor}\n}\n","import {LABELS} from '../_shared'\n\nexport default (field) => {\n  for (const label of LABELS) {\n    if (field.includes(label)) {\n      return true\n    }\n  }\n  return false\n}\n","import moment from 'moment'\n\nexport default (event) => {\n  const momentDate = moment(event.date)\n  const isStandard = event.date.includes('/') || event.date.includes('-') || event.date.length > 5\n  const year = isStandard ? momentDate.year() : event.date\n  const month = isStandard ? momentDate.month() + 1 : '?'\n  const date = isStandard ? momentDate.date() : '?'\n  const time = event.time && event.time.length > 0 ? event.time : null\n  return {year, month, date, time, momentDate}\n}\n","import {SETTINGS} from '../_shared'\n\nexport default ({title, subtitle, storage, source}) => {\n  const history = JSON.parse(storage.getItem(SETTINGS.title))\n  history[source] = {\n    title: title,\n    subtitle: subtitle,\n    time: Date.now()\n  }\n  for (const entry in history) {\n    if (!entry.match(/^http/) || history[entry].title.includes('<!DOCTYPE html>')\n    ) {\n      delete history[entry]\n    }\n  }\n  storage.setItem(SETTINGS.title, JSON.stringify(history))\n}\n","import isInViewport from './isInViewport'\n\nexport default (eventElements) => {\n  const visibleIDs = []\n  Array.from(eventElements).forEach((elem) => {\n    if (isInViewport(elem)) {\n      visibleIDs.push(parseInt(elem.id, 10))\n    }\n  })\n  visibleIDs.sort((a, b) => {\n    return a - b\n  })\n  return visibleIDs\n}\n","// thanks to Lewis Cowles: https://medium.com/@LewisCowles1/i-also-used-the-concept-but-abandoned-jquery-for-vanilla-js-b55f638586fe\n\nexport default (elem) => {\n  let elemTop = elem.offsetTop\n  let elemBottom = elemTop + elem.offsetHeight\n  let viewportTop = window.scrollY\n  let viewportBottom = viewportTop + window.innerHeight\n  return elemBottom > viewportTop && elemTop < viewportBottom\n}\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\nimport queryString from 'query-string'\nimport Papa from 'papaparse'\n\nimport {SETTINGS, storage} from '../_shared'\n\nimport {Sidebar} from '../Sidebar'\nimport {Home} from '../Home'\nimport {Header} from '../Header'\nimport {Footer} from '../Footer'\nimport {Timeline} from '../Timeline'\n\nimport parseCsvArray from './parseCsvArray'\nimport updateStorage from './updateStorage'\nimport getVisibleEventIDs from './getVisibleEventIDs'\n\nimport logo from './logo.svg'\nimport './App.css'\n\nclass App extends React.Component {\n  state = {\n    queries: queryString.parse(this.props.location.search),\n    isLoaded: false,\n    status: 'standby',\n\n    title: '',\n    subtitle: '',\n    events: [],\n\n    filter: '',\n    showSidebar: false,\n    visibleEventIDs: [],\n    firstStagedEventIndex: 0,\n    lastStagedEventIndex: 10,\n\n    // for sticky menu\n    contextRef: null\n  }\n\n  componentDidMount () {\n    this.startApp()\n    window.addEventListener('scroll', (e) => {\n      this.updateVisibleEventIDs()\n    })\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.location.search !== prevProps.location.search) {\n      const prevSource = this.state.queries.source\n      const newQueries = queryString.parse(this.props.location.search)\n      this.setState({queries: newQueries}, () => {\n        if (prevSource !== newQueries.source) {\n          this.startApp()\n        }\n      })\n    }\n  }\n\n  startApp = () => {\n    if (!this.state.queries.source || decodeURIComponent(this.state.queries.source).length === 0) {\n      this.setState({status: 'invalid', isLoaded: false})\n      return\n    }\n    this.fetchData()\n  }\n\n  fetchData = () => {\n    this.setState({status: 'loading', isLoaded: false}, () => {\n      Papa.parse(this.state.queries.source, {\n        download: true,\n        complete: (result) => {\n          const {title, subtitle, events, labelColor} = parseCsvArray(result.data)\n          updateStorage({title, subtitle, storage, source: this.state.queries.source})\n          this.setState({title, subtitle, events, labelColor,\n            isLoaded: true,\n            status: 'success'\n          }, () => {\n            this.eventElements = window.document.getElementsByClassName('Event')\n            this.updateVisibleEventIDs()\n            window.setTimeout(() => {\n              this.setState({status: 'standby'})\n            }, 5000)\n          })\n        },\n        error: (error) => {\n          console.error(error)\n        }\n      })\n    })\n  }\n\n  updateVisibleEventIDs = () => {\n    const STAGECAPACITY = 5\n    const visibleIDs = getVisibleEventIDs(this.eventElements)\n\n    this.setState({\n      visibleEventIDs: visibleIDs,\n      firstStagedEventIndex: visibleIDs[0] - STAGECAPACITY,\n      lastStagedEventIndex: visibleIDs[visibleIDs.length - 1] + STAGECAPACITY\n    })\n  }\n\n  toggleSidebar = () => {\n    this.setState((prevState, props) => {\n      return {showSidebar: !prevState.showSidebar}\n    })\n  }\n\n  scrollReset = (direction) => {\n    this.props.history.push(`${this.props.location.pathname}${this.props.location.search}`)\n    if (direction === 'top') {\n      window.scrollTo(0, 0)\n    } else if (direction === 'bottom') {\n      window.scrollTo(0, window.document.body.scrollHeight)\n    }\n  }\n\n  setFilter = (character) => {\n    this.setState((prevState, props) => {\n      if (prevState.filter === character) {\n        return {filter: ''}\n      }\n      return {filter: character}\n    })\n  }\n\n  handleContextRef = (contextRef) => {\n    this.setState({ contextRef })\n  }\n\n  render () {\n    const isAvailable = this.state.queries.source && this.state.events.length > 0\n    const {title, subtitle} = isAvailable ? this.state : SETTINGS\n\n    return (\n      <div className='App' style={this.state.showSidebar ? {left: '20rem'} : {}} >\n        <Sidebar onCurrentClick={this.toggleSidebar} />\n        <main className='App-main'>\n          <Header logo={logo} title={title} subtitle={subtitle} status={this.state.status}\n            onIconClick={this.startApp}\n            onLogoClick={this.toggleSidebar} />\n          <section className='Body-wrapper ui container'>\n            {isAvailable ? (\n              <Timeline\n                handleContextRef={this.handleContextRef}\n                scrollReset={this.scrollReset}\n                setFilter={this.setFilter}\n                {...this.state}\n              />\n            ) : (\n              <Home />\n            )}\n          </section>\n          <hr className='ui divider' />\n          <Footer />\n        </main>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(App)\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nimport {SETTINGS} from './_shared'\nimport {App} from './App/'\nimport './index.css'\n\nimport registerServiceWorker from './registerServiceWorker'\n\nReactDOM.render(<Router basename={SETTINGS.baseUrl}><App /></Router>, document.getElementById('root'))\nregisterServiceWorker()\n"],"sourceRoot":""}
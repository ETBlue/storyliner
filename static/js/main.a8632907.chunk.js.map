{"version":3,"sources":["App/logo.svg","_shared/SETTINGS.js","_shared/storage.js","App/COLORS.js","_shared/getFieldGroup.js","_shared/LabelColorContext.js","_shared/FilterContext.js","_shared/LABELS.js","Sidebar/Sidebar.js","Home/Home.js","Header/Header.js","Footer/Footer.js","Timeline/Filter.js","Timeline/LabelSet.js","Timeline/Relation.js","Timeline/Location.js","Timeline/QuoteList.js","Timeline/Event.js","Timeline/getRefMsg.js","Timeline/isLocationAvailable.js","Timeline/isMediaAvailable.js","Timeline/MenuYearMark.js","Timeline/MenuItem.js","Timeline/Timeline.js","_shared/getEventIndex.js","Timeline/isEventListed.js","Timeline/isEventStaged.js","Timeline/isEventInViewPort.js","Timeline/isFirstEventOfYear.js","App/parseCsvArray.js","App/isLabel.js","App/getDateTime.js","App/getVisibleEventIDs.js","App/isInViewport.js","App/App.js","App/updateStorage.js","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","SETTINGS","storage","window","localStorage","getItem","setItem","JSON","stringify","getFieldGroup","_ref","event","field","fieldGroup","i","concat","push","LabelColorContext","React","createContext","LabelColorContextProvider","props","react_default","a","createElement","Provider","value","children","FilterContext","FilterContextProvider","_useState","useState","_useState2","Object","slicedToArray","filter","setFilter","character","LABELS","withRouter","attributes","href","className","location","search","onClick","onCurrentClick","style","cursor","sorted","history","parse","keys","forEach","key","index","title","subtitle","time","sort","b","historyJSX","map","item","assign","margin","Home","state","input","undefined","handleInputChange","e","_this","setState","target","handleSourceSubmit","destinationUrl","pathname","queryString","source","console","log","type","placeholder","onChange","this","autoFocus","marginBottom","rel","Component","memo","logo","onIconClick","onLogoClick","icon","status","display","flex","src","alt","flexGrow","_useContext","useContext","label","size","sla","labelColor","set","length","backgroundColor","subjectFields","objectFields","Timeline_LabelSet","action","topic","locationFields","quotes","quotesJSX","quote","quoteIndex","Author","author","content","eventIndex","isActive","refEventIndex","refEvent","refEventTitle","isQuoteExists","isEventReferenced","queries","ref","toString","refMeUrl","hash","id","timeTo","msg","momentDate","to","isBefore","isAfter","getRefMsg","year","month","date","react_router_dom","image_url","image_alt","Timeline_Relation","description","location_1","isLocationAvailable","Timeline_Location","channel","channel_carrier","isMediaAvailable","channel_prep","content_carrier","ref_url","ref_title","Timeline_QuoteList","note","isStaged","isInViewPort","Menu","EventList","parseInt","isNaN","events","join","replace","allLabels","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","labelFields","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isEventListed","Timeline_Event","firstStagedEventIndex","lastStagedEventIndex","isEventStaged","visibleEventIDs","includes","isEventInViewPort","Timeline_MenuYearMark","prevEvent","isFirstEventOfYear","Timeline_MenuItem","handleContextRef","es","context","contextRef","scrollReset","float","opacity","Timeline_Filter","COLORS","parseCsvArray","lines","titles","headers","labels","Set","line","lineIndex","column","columnIndex","header","split","isLabel","add","polishedEvent","moment","isStandard","getDateTime","colors","delete","Math","floor","random","color","Array","from","getVisibleEventIDs","eventElements","visibleIDs","elem","elemTop","offsetTop","elemBottom","offsetHeight","viewportTop","scrollY","viewportBottom","innerHeight","isInViewport","setStatus","_useState3","_useState4","setTitle","_useState5","_useState6","setSubtitle","_useState7","_useState8","setLabelColor","_useState9","_useState10","setEvents","_useState11","_useState12","setVisibleEventIDs","_useState13","_useState14","setFirstStagedEventIndex","_useState15","_useState16","setLastStagedEventIndex","updateVisibleEventIDs","startApp","useCallback","decodeURIComponent","Papa","download","complete","result","parsedCSV","data","entry","Date","now","match","updateStorage","document","getElementsByClassName","addEventListener","setTimeout","error","useEffect","removeEventListener","_useState17","_useState18","showSidebar","setShowSidebar","toggleSidebar","prev","direction","scrollTo","body","scrollHeight","_useState19","_useState20","setContextRef","isAvailable","memoizedTimeline","useMemo","src_Timeline_Timeline","left","src_Sidebar_Sidebar","src_Header_Header","LabelColorContext_LabelColorContextProvider","FilterContext_FilterContextProvider","src_Home_Home","src_Footer_Footer","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","basename","src_App_App","getElementById","URL","process","origin","fetch","response","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.a8632907.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","export default {\n  title: 'Storyliner',\n  subtitle: 'The Interactive Gossip Viewer',\n  baseUrl: '/storyliner',\n  query: '?source=',\n  titleRowIndex: 0,\n  headerRowIndex: 1\n}\n","import SETTINGS from './SETTINGS'\n\nconst storage = window.localStorage\nif (!storage.getItem(SETTINGS.title)) {\n  storage.setItem(SETTINGS.title, JSON.stringify({}))\n}\n\nexport default storage\n","const COLORSPACE = 30\nconst COLORS = []\nfor (let i = 0; i < 360 / COLORSPACE; i++) {\n  COLORS.push(i * COLORSPACE)\n}\n\nexport default COLORS\n","export default ({event, field}) => {\n  const fieldGroup = [field]\n  for (let i = 1; event[`${field}_${i}`]; i++) {\n    fieldGroup.push(`${field}_${i}`)\n  }\n  return fieldGroup\n}\n","import React from 'react'\n\nconst LabelColorContext = React.createContext()\n\nconst LabelColorContextProvider = (props) => {\n  return (\n    <LabelColorContext.Provider value={props.value}>\n      {props.children}\n    </LabelColorContext.Provider>\n  )\n}\n\nexport {LabelColorContext, LabelColorContextProvider}\n","import React, {useState} from 'react'\n\nconst FilterContext = React.createContext()\n\nconst FilterContextProvider = (props) => {\n  const [filter, setFilter] = useState('')\n  const handleFilterUpdate = (character) => {\n    if (filter === character) {\n      setFilter('')\n    } else {\n      setFilter(character)\n    }\n  }\n\n  return (\n    <FilterContext.Provider value={{filter, setFilter: handleFilterUpdate}}>\n      {props.children}\n    </FilterContext.Provider>\n  )\n}\n\nexport {FilterContext, FilterContextProvider}\n","export default [\n  'subject',\n  'object',\n  'location'\n]\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\n\nimport {SETTINGS, storage} from '../_shared'\n\nimport './Sidebar.css'\n\nconst Sidebar = (props) => {\n\n  let attributes = {\n    href: SETTINGS.baseUrl,\n    className: 'item'\n  }\n  if (props.location.search === '') {\n    attributes = {\n      className: 'active item',\n      onClick: props.onCurrentClick,\n      style: {cursor: 'default'}\n    }\n  }\n\n  let sorted = []\n  const history = JSON.parse(storage.getItem(SETTINGS.title))\n  Object.keys(history).forEach((key, index) => {\n    sorted.push({\n      key: key,\n      title: history[key].title,\n      subtitle: history[key].subtitle,\n      time: history[key].time\n    })\n  })\n  sorted.sort((a, b) => {\n    return b.time - a.time\n  })\n\n  const historyJSX = sorted.map((item, index) => {\n\n    let attributes = {\n      href: `${SETTINGS.baseUrl}/${SETTINGS.query}${item.key}`,\n      className: 'item'\n    }\n    if (props.location.search === `${SETTINGS.query}${item.key}`) {\n      attributes = {\n        className: 'active item',\n        onClick: props.onCurrentClick,\n        style: {cursor: 'default'}\n      }\n    }\n\n    return (\n      <a key={item.key} {...attributes} >\n        <span className='ui small header'>\n        {item.title}\n          <span className='sub header'>\n          {item.subtitle}\n          </span>\n        </span>\n      </a>\n    )\n  })\n\n  return (\n    <aside className='Sidebar'>\n      <h1 className='ui header'>\n        <span className='App-name' >\n          {SETTINGS.title}\n        </span>\n        <div className='sub header App-description'>\n          {SETTINGS.subtitle}\n        </div>\n      </h1>\n      <nav className='ui vertical secondary fluid menu' style={{margin: '0'}} >\n      <a {...attributes} >\n        <i className='icon home' />\n        Home\n      </a>\n      {historyJSX}\n      </nav>\n    </aside>\n  )\n}\n\nexport default withRouter(Sidebar)\n","import React from 'react'\nimport {withRouter} from 'react-router-dom'\nimport queryString from 'query-string'\n\nimport './Home.css'\n\nclass Home extends React.Component {\n  state = {\n    input: undefined,\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      input: e.target.value\n    })\n  }\n\n  handleSourceSubmit = () => {\n    const destinationUrl = `${this.props.location.pathname}?${queryString.stringify({source: this.state.input})}`\n    console.log(this.props.location.pathname)\n    console.log(destinationUrl)\n    this.props.history.push(destinationUrl)\n  }\n\n  render () {\n    return (\n      <section className='Home' >\n        <div className='ui fluid action input' >\n          <input type='text' placeholder='Your data source here... (.csv file)'\n            onChange={this.handleInputChange} value={this.state.input || ''} autoFocus />\n          <button className='ui teal button' onClick={this.handleSourceSubmit}>Submit</button>\n        </div>\n        <hr className='ui hidden section divider' />\n        <div className='ui center aligned basic segment'>\n          <h2 className='ui bottom pointing black label' style={{marginBottom: '2rem'}} >\n            Create your own .csv file in 1 minute!\n          </h2>\n          <hr className='ui hidden fitted divider' />\n          <span className='ui horizontal black label'>Step 1</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Make a copy\n            <div className='sub header'>\n              of this <a href='https://docs.google.com/spreadsheets/d/1w8IAAl2JZhqpmLIxJ8GWNO6KT0CQxM4wCnnIPpGvLPM/edit?usp=sharing' target='_blank' rel='noopener noreferrer'>Google Spreadsheet</a>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 2</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Publish it by clicking\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>File</code> > <code className='ui horizontal basic label'>Publish to the web...</code>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 3</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Select the format of\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>Comma-seperated values (.csv)</code>\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 4</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Click the\n            <div className='sub header'>\n              <code className='ui horizontal basic label'>Publish</code> button\n            </div>\n          </h3>\n          <span className='ui horizontal black label'>Step 5</span>\n          <h3 className='ui tiny header' style={{margin: '1rem 0'}} >\n            Copy the provided URL\n            <div className='sub header'>\n              and paste here\n            </div>\n          </h3>\n          <h3 className='ui top pointing black label'>\n            And you are done!\n          </h3>\n        </div>\n      </section>\n    )\n  }\n}\n\nexport default withRouter(Home)\n","import React from 'react'\n\nimport './Header.css'\n\nconst Header = ({logo, title, subtitle, onIconClick, onLogoClick, status}) => {\n  let icon = 'redo'\n  switch (status) {\n    case 'success':\n      icon = 'green check'\n      break\n    case 'loading':\n      icon = 'blue spinner'\n      break\n    case 'invalid':\n      icon = ''\n      break\n    case 'error':\n      icon = 'red exclamation triangle'\n      break\n    default:\n      icon = 'redo'\n  }\n  return (\n    <header className='Header'>\n      <div className='wrapper ui container' style={{display: 'flex'}} >\n        <span style={{flex: 'none'}}>\n          <img src={logo} alt=\"logo\" className='ui image App-logo' onClick={onLogoClick}/>\n        </span>\n        <h1 className=\"ui header\" style={{flexGrow: '1', margin: '0'}} >\n          <span className='App-name' >\n            {title}\n          </span>\n          <div className='sub header App-description'>\n            {subtitle}\n          </div>\n        </h1>\n        <div style={{flex: 'none'}} >\n          { icon === '' ? null : (<i className={`icon ${icon}`} onClick={onIconClick} />)}\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default React.memo(Header)\n","import React from 'react'\n\nimport './Footer.css'\n\nconst Footer = () => (\n  <footer className='Footer' >\n    <div className='ui center aligned container'>\n      <div className='wrapper'>\n        <p>\n        Yet another open data experiment by ETBlue.\n        <br />\n        <a href='https://github.com/ETBlue/storyliner' target='_blank' rel='noopener noreferrer'>\n          <i className='icon code' />\n          Source code\n        </a>\n        <a href='https://etblue.github.io/storyliner/?source=https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8ukLhLNcPLc20_7J2ju6_e_KSLW2RW0LDu_1_4__IvaVUCO1BhZ9RGwefcWkOVRQ8XjlYv6MSe8oA/pub?output=csv'>\n          <i className='icon globe' />\n          Sample page\n        </a>\n        <a href='https://docs.google.com/spreadsheets/d/1w8IAAl2JZhqpmLIxJ8GWNO6KT0CQxM4wCnnIPpGvLPM/edit?usp=sharing' target='_blank' rel='noopener noreferrer'>\n          <i className='icon table' />\n          Sample data\n        </a>\n        <br />\n        <a href='https://etblue.blogspot.com/2018/04/storyliner-interactive-gossip-viewer.html' target='_blank' rel='noopener noreferrer'>\n          <i className='icon blogger b' />\n          Release note\n        </a>\n        <a href='https://twitter.com/ETBlue/status/981475770836049922' target='_blank' rel='noopener noreferrer'>\n          <i className='icon twitter' />\n          Dev log\n        </a>\n        <a href='https://www.facebook.com/ETBlue/media_set?set=a.10212507248088923.1073741901.1014354995' target='_blank' rel='noopener noreferrer'>\n          <i className='icon facebook f' />\n          Dev log\n        </a>\n        <a href='https://www.playpcesor.com/2018/04/storyliner-google.html' target='_blank' rel='noopener noreferrer'>\n          <i className='icon blogger b' />\n          Tutorial (by 電腦玩物)\n        </a>\n        </p>\n      </div>\n    </div>\n  </footer>\n)\n\nexport default React.memo(Footer)\n","import React, {useContext} from 'react'\n\nimport {FilterContext} from '../_shared'\n\nconst Filter = () => {\n  const {filter, setFilter} = useContext(FilterContext)\n  return (\n    <div className='Filter ui two column stackable grid'>\n      <div className='eleven wide column'>\n        <p className='Filter-message'>\n          Filtered by\n          <span className='ui horizontal label' style={{margin: '0 0.5rem'}} >\n            {filter}\n            <i className='icon delete'\n              onClick={() => setFilter(filter)} />\n          </span>\n        </p>\n      </div>\n    </div>\n  )\n}\n\nexport default React.memo(Filter)\n","import React, {useContext} from 'react'\n\nimport {LabelColorContext, FilterContext} from '../_shared'\n\nconst LabelSet = ({event, label, size, sla}) => {\n  const {setFilter} = useContext(FilterContext)\n  const labelColor = useContext(LabelColorContext)\n  const set = []\n  if (event[`${label}_prep`] && event[`${label}_prep`].length > 0) {\n    set.push(\n      <span key={`${label}_prep`}>\n        {event[`${label}_prep`]}\n      </span>\n    )\n  }\n  if (event[label] && event[label].length > 0) {\n    set.push(\n      <span key={label} className={`ui ${size} horizontal label`}\n        style={{backgroundColor: `hsla(${labelColor[event[label]]}, ${sla})`}}\n        onClick={() => setFilter(event[label])} >\n        {event[label]}\n      </span>\n    )\n  }\n  return set\n}\n\nexport default React.memo(LabelSet)\n","import React from 'react'\n\nimport {getFieldGroup} from '../_shared'\n\nimport LabelSet from './LabelSet'\n\nconst Relation = ({event}) => {\n  const subjectFields = getFieldGroup({event, field: 'subject'})\n  const objectFields = getFieldGroup({event, field: 'object'})\n  return (\n    <p className='Relation'>\n      {\n        subjectFields.map((field) => <LabelSet key={field} event={event} label={field} size='large' sla='50%, 50%, 0.3' />)\n      }\n      {event.action && event.action.length > 0 ? (\n        <span>\n          {event.action}\n        </span>\n      ) : null}\n      {\n        objectFields.map((field) => <LabelSet key={field} event={event} label={field} size='large' sla='50%, 50%, 0.3' />)\n      }\n      {event.topic && event.topic.length > 0 ? (\n        <span>\n          {event.topic}\n        </span>\n      ) : null}\n    </p>\n  )\n}\n\nexport default React.memo(Relation)\n","import React from 'react'\n\nimport {getFieldGroup} from '../_shared'\n\nimport LabelSet from './LabelSet'\n\nconst Location = ({event}) => {\n  const locationFields = getFieldGroup({event, field: 'location'})\n  return (\n    <p className='Location description'>\n      {\n        locationFields.map((field) => <LabelSet key={field} event={event} label={field} size='small' sla='20%, 70%, 0.3' />)\n      }\n    </p>\n  )\n}\n\nexport default React.memo(Location)\n","import React from 'react'\n\nconst QuoteList = ({quotes}) => {\n  const quotesJSX = quotes.map((quote, quoteIndex) => {\n    let Author = null\n\n    if (quote.author.length > 0) {\n      if (!quotes[quoteIndex + 1] || quote.author !== quotes[quoteIndex + 1].author) {\n        Author = <p className='Author'>— {quote.author}</p>\n      }\n    }\n\n    return (\n      <blockquote key={quoteIndex} >\n        <i className='quote left icon' />\n        <i className='quote right icon' />\n        {quote.content}\n        {Author}\n      </blockquote>\n    )\n  })\n\n  return (\n    <div className='QuoteList ui secondary segment'>\n      {quotesJSX}\n    </div>\n  )\n}\n\nexport default React.memo(QuoteList)\n","import React from 'react'\nimport {Link} from 'react-router-dom'\nimport queryString from 'query-string'\n\nimport Relation from './Relation'\nimport Location from './Location'\nimport QuoteList from './QuoteList'\nimport isMediaAvailable from './isMediaAvailable'\nimport isLocationAvailable from './isLocationAvailable'\nimport getRefMsg from './getRefMsg'\n\nconst Event = ({event, eventIndex, isActive, props, refEventIndex, refEvent, refEventTitle}) => {\n  const isQuoteExists = event.quote && event.quote.length > 0\n  const isEventReferenced = refEventIndex === eventIndex\n  const queries = Object.assign({}, props.queries)\n  if (isEventReferenced) {\n    delete queries.ref\n  } else {\n    queries.ref = eventIndex.toString()\n  }\n  const refMeUrl = `${props.location.pathname}?${queryString.stringify(queries)}${props.location.hash}`\n  return (\n    <article key={eventIndex} id={eventIndex} className='Event' >\n      <div className='ui two column stackable grid' >\n        <div className='eleven wide column'>\n          {refEvent && !isEventReferenced ? (\n            <div className='reference'>\n              <div className='text'>\n                {getRefMsg({event, refEvent, refEventTitle})}\n              </div>\n            </div>\n          ) : null}\n          <div className={`Event-block ui segments ${isActive ? 'active' : ''}`}>\n            <div className='ui segment'>\n              <a className='Timestamp' href={`#${eventIndex}`}>\n                {event.year}-{event.month}-{event.date} {event.time || null}\n              </a>\n              <Link to={refMeUrl} className='RefMeButton ui basic mini icon button'>\n                <i className={`${isEventReferenced ? 'teal' : ''} icon thumbtack`} />\n              </Link>\n              <div className='Content'>\n                {event.image_url ? (\n                  <div className='Content-image'>\n                    <a href={event.image_url} target='_blank' rel='noopener noreferrer' className='ui small bordered rounded image'>\n                      <img src={event.image_url} alt={event.image_alt} />\n                    </a>\n                  </div>\n                ) : null}\n                <div className='Content-text'>\n                  <Relation event={event} />\n                  {event.description ? (\n                    <p className='description'>\n                      {event.description}\n                    </p>\n                  ) : null}\n                  {isLocationAvailable({event}) ? (\n                    <Location event={event} />\n                  ) : null}\n                  {isMediaAvailable({event}) ? (\n                    <p className='description'>\n                      {event.channel_prep}{event.channel}{event.content_carrier} — <a href={event.ref_url} target='_blank' rel='noopener noreferrer'>\n                        {event.ref_title && event.ref_title.length > 0 ? event.ref_title : event.ref_url}\n                      </a>\n                    </p>\n                  ) : null}\n                </div>\n              </div>\n            </div>\n            {isQuoteExists ? (\n              <QuoteList quotes={event.quote} />\n            ) : null}\n          </div>\n        </div>\n        {event.note && event.note.length > 0 ? (\n          <div className='five wide column'>\n            <div className='Note'>\n              <div className='ui horizontal fitted divider'>\n                <i className='icon coffee' />\n              </div>\n              <p className='Note-content'>\n                {event.note}\n              </p>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </article>\n  )\n}\n\nexport default React.memo(Event)\n","export default ({event, refEvent, refEventTitle}) => {\n  const msg = event.momentDate.to(refEvent.momentDate, true)\n  let timeTo\n  if (event.momentDate.isBefore(refEvent.momentDate)) {\n    timeTo = `${msg} before`\n  } else if (event.momentDate.isAfter(refEvent.momentDate)) {\n    timeTo = `${msg} after`\n  } else {\n    timeTo = 'same day as'\n  }\n  return `${timeTo} ${refEventTitle}`\n}\n","export default ({event}) => {\n  return (event.location && event.location.length > 0) || (event.location_1 && event.location_1.length > 0)\n}\n","export default ({event}) => {\n  return (event.channel && event.channel.length > 0) || (event.channel_carrier && event.channel_carrier.length > 0)\n}\n","import React from 'react'\n\nconst MenuYearMark = ({year, eventIndex, isStaged, isInViewPort}) => {\n  return (\n    <div key={`year-of-${eventIndex}`}\n      className={`MenuYearMark item ${isStaged ? '' : 'not-staged'} ${isInViewPort ? 'in-viewport' : ''}`}>\n      {year}\n    </div>\n  )\n}\n\nexport default React.memo(MenuYearMark)\n","import React from 'react'\n\nconst MenuItem = ({eventIndex, isActive, isInViewPort, isStaged, month, date, time}) => {\n  return (\n    <a key={eventIndex} href={`#${eventIndex}`}\n      className={`MenuItem item ${isActive ? 'active' : ''} ${isInViewPort ? 'in-viewport' : ''} ${isStaged ? '' : 'not-staged'}`}>\n      {`${month}/${date}`}\n      {time ? (\n        <span className='Time'>\n          {time}\n        </span>\n      ) : null}\n    </a>\n  )\n}\n\nexport default React.memo(MenuItem)\n","import React, {useContext} from 'react'\nimport {withRouter} from 'react-router-dom'\nimport {Sticky} from 'semantic-ui-react'\n\nimport {getEventIndex, FilterContext} from '../_shared'\n\nimport isEventListed from './isEventListed'\nimport isEventInViewPort from './isEventInViewPort'\nimport isEventStaged from './isEventStaged'\nimport isFirstEventOfYear from './isFirstEventOfYear'\nimport Filter from './Filter'\nimport Event from './Event'\nimport MenuYearMark from './MenuYearMark'\nimport MenuItem from './MenuItem'\nimport './Timeline.css'\n\nconst Timeline = (props) => {\n  const {filter} = useContext(FilterContext)\n  // get ready to set up page body\n  const Menu = []\n  const EventList = []\n\n  const refEventIndex = parseInt(props.queries.ref, 10)\n  const refEvent = !isNaN(refEventIndex) ? props.events[refEventIndex] : null\n  const fields = ['subject', 'subject_1_prep', 'subject_1', 'action', 'object', 'object_1_prep', 'object_1', 'topic']\n  const refEventTitle = refEvent ? fields.map((field) => refEvent[field]).join('') : null\n\n  // render relations\n  props.events.forEach((event, eventIndex) => {\n    if (!event.date) {\n      return null\n    }\n\n    const isActive = getEventIndex(props.location.hash) === eventIndex\n\n    if (isEventListed({filter, event})) {\n      EventList.push(\n        <Event key={eventIndex} eventIndex={eventIndex} event={event}\n          isActive={isActive} props={props}\n          refEventIndex={refEventIndex} refEvent={refEvent} refEventTitle={refEventTitle} />\n      )\n    }\n    const isStaged = isEventStaged({firstStagedEventIndex: props.firstStagedEventIndex, lastStagedEventIndex: props.lastStagedEventIndex, eventIndex})\n    const isInViewPort = isEventInViewPort({visibleEventIDs: props.visibleEventIDs, eventIndex})\n    if (eventIndex === 0) {\n      Menu.push(\n        <MenuYearMark key={`year-of-${eventIndex}`} eventIndex={eventIndex}\n          isInViewPort={isInViewPort}\n          isStaged={isStaged}\n          year={event.year} />\n      )\n    } else if (isFirstEventOfYear({events: props.events, eventIndex})) {\n      Menu.push(\n        <MenuYearMark key={`year-of-${eventIndex}`} eventIndex={eventIndex}\n          isInViewPort={isInViewPort}\n          isStaged={isStaged}\n          year={event.year} />\n      )\n    }\n\n    Menu.push(\n      <MenuItem key={eventIndex} eventIndex={eventIndex}\n        isActive={isActive}\n        isInViewPort={isInViewPort}\n        isStaged={isStaged}\n        month={event.month} date={event.date} time={event.time} />\n    )\n  })\n\n  return (\n    <div className='Body'>\n      <div className='Menu-wrapper' ref={props.handleContextRef}>\n        <Sticky context={props.contextRef}>\n          <nav className='ui vertical fluid secondary mini pointing pink menu'>\n            <span className='item' style={{cursor: 'pointer'}}\n              onClick={() => props.scrollReset('top')} >\n              <i className='icon up chevron' style={{float: 'none', opacity: '0.5'}} />\n            </span>\n            {Menu}\n            <span className='item' style={{cursor: 'pointer'}}\n              onClick={() => props.scrollReset('bottom')} >\n              <i className='icon down chevron' style={{float: 'none', opacity: '0.5'}} />\n            </span>\n          </nav>\n        </Sticky>\n      </div>\n      <div className='Event-wrapper'>\n        {filter.length > 0 ? (\n          <Filter {...props} />\n        ) : null}\n        {EventList}\n      </div>\n    </div>\n  )\n}\n\nexport default withRouter(Timeline)\n","export default (hash) => {\n  return parseInt(hash.replace('#', ''), 10)\n}\n","import {LABELS, getFieldGroup} from '../_shared'\n\nexport default ({filter, event}) => {\n  if (filter.length === 0) {\n    return true\n  }\n\n  let allLabels = []\n  for (const label of LABELS) {\n    const labelFields = getFieldGroup({event, field: label})\n    allLabels = allLabels.concat(labelFields)\n  }\n\n  for (const label of allLabels) {\n    if (filter === event[label]) {\n      return true\n    }\n  }\n\n  return false\n}\n","export default ({firstStagedEventIndex, lastStagedEventIndex, eventIndex}) => {\n  return eventIndex >= firstStagedEventIndex && eventIndex <= lastStagedEventIndex\n}\n","export default ({visibleEventIDs, eventIndex}) => {\n  return visibleEventIDs.includes(eventIndex)\n}\n","export default ({events, eventIndex}) => {\n  const event = events[eventIndex]\n  const prevEvent = events[eventIndex - 1]\n  return event.year !== prevEvent.year\n}\n","import {SETTINGS} from '../_shared'\n\nimport getDateTime from './getDateTime'\nimport isLabel from './isLabel'\nimport COLORS from './COLORS'\n\nexport default (lines) => {\n  const titles = lines[SETTINGS.titleRowIndex]\n  const title = titles[0]\n  const subtitle = titles[1]\n\n  const events = []\n  const headers = lines[SETTINGS.headerRowIndex]\n  const labels = new Set()\n\n  lines.forEach((line, lineIndex) => {\n    if (lineIndex <= SETTINGS.headerRowIndex) {\n      return\n    }\n\n    const event = {quote: []}\n    let author = ''\n    line.forEach((column, columnIndex) => {\n      const header = headers[columnIndex]\n      switch (header) {\n        case 'quote_author':\n          author = column || ''\n          break\n        case 'quote_content':\n          if (column && column.length > 0) {\n            column.split('\\n').forEach((quote) => {\n              event.quote.push({\n                author,\n                content: quote\n              })\n            })\n          }\n          break\n        case 'via':\n          // alias from old version\n          event.channel_prep = column || ''\n          break\n        case 'content_topic':\n          // alias from old version\n          event.topic = column || ''\n          break\n        default:\n          event[header] = column || ''\n          if (isLabel(header)) {\n            labels.add(column)\n          }\n      }\n    })\n    if (event.date.length === 0) {\n      // when the date colume is empty, merge quotes into latest object\n      events[events.length - 1].quote = events[events.length - 1].quote.concat(event.quote)\n    } else {\n      const polishedEvent = Object.assign(event, getDateTime(event))\n      events.push(polishedEvent)\n    }\n  })\n\n  const labelColor = {}\n  let colors = new Set(COLORS)\n  labels.delete('')\n  labels.forEach((label) => {\n    const index = Math.floor(Math.random() * colors.size)\n    const color = Array.from(colors)[index]\n    labelColor[label] = color\n    colors.delete(color)\n    if (colors.size === 0) {\n      colors = new Set(COLORS)\n    }\n  })\n\n  return {title, subtitle, events, labelColor}\n}\n","import {LABELS} from '../_shared'\n\nexport default (field) => {\n  for (const label of LABELS) {\n    if (field.includes(label) && !field.includes('_prep')) {\n      return true\n    }\n  }\n  return false\n}\n","import moment from 'moment'\n\nexport default (event) => {\n  const momentDate = moment(event.date)\n  const isStandard = event.date.includes('/') || event.date.includes('-') || event.date.length > 5\n  const year = isStandard ? momentDate.year() : event.date\n  const month = isStandard ? momentDate.month() + 1 : '?'\n  const date = isStandard ? momentDate.date() : '?'\n  const time = event.time && event.time.length > 0 ? event.time : null\n  return {year, month, date, time, momentDate}\n}\n","import isInViewport from './isInViewport'\n\nexport default (eventElements) => {\n  const visibleIDs = []\n  Array.from(eventElements).forEach((elem) => {\n    if (isInViewport(elem)) {\n      visibleIDs.push(parseInt(elem.id, 10))\n    }\n  })\n  visibleIDs.sort((a, b) => {\n    return a - b\n  })\n  return visibleIDs\n}\n","// thanks to Lewis Cowles: https://medium.com/@LewisCowles1/i-also-used-the-concept-but-abandoned-jquery-for-vanilla-js-b55f638586fe\n\nexport default (elem) => {\n  let elemTop = elem.offsetTop\n  let elemBottom = elemTop + elem.offsetHeight\n  let viewportTop = window.scrollY\n  let viewportBottom = viewportTop + window.innerHeight\n  return elemBottom > viewportTop && elemTop < viewportBottom\n}\n","import React, {useState, useEffect, useCallback, useMemo} from 'react'\nimport {withRouter} from 'react-router-dom'\nimport queryString from 'query-string'\nimport Papa from 'papaparse'\n\nimport {SETTINGS, storage, LabelColorContextProvider, FilterContextProvider} from '../_shared'\n\nimport {Sidebar} from '../Sidebar'\nimport {Home} from '../Home'\nimport {Header} from '../Header'\nimport {Footer} from '../Footer'\nimport {Timeline} from '../Timeline'\n\nimport parseCsvArray from './parseCsvArray'\nimport updateStorage from './updateStorage'\nimport getVisibleEventIDs from './getVisibleEventIDs'\n\nimport logo from './logo.svg'\nimport './App.css'\n\nconst App = (props) => {\n  const queries = queryString.parse(props.location.search)\n  const [status, setStatus] = useState('standby')\n\n  const [title, setTitle] = useState('')\n  const [subtitle, setSubtitle] = useState('')\n  const [labelColor, setLabelColor] = useState(undefined)\n  const [events, setEvents] = useState([])\n\n  const [visibleEventIDs, setVisibleEventIDs] = useState([])\n  const [firstStagedEventIndex, setFirstStagedEventIndex] = useState(0)\n  const [lastStagedEventIndex, setLastStagedEventIndex] = useState(10)\n  const updateVisibleEventIDs = () => {\n    const STAGECAPACITY = 5\n    const visibleIDs = getVisibleEventIDs(window.eventElements)\n\n    setVisibleEventIDs(visibleIDs)\n    setFirstStagedEventIndex(visibleIDs[0] - STAGECAPACITY)\n    setLastStagedEventIndex(visibleIDs[visibleIDs.length - 1] + STAGECAPACITY)\n  }\n\n  const startApp = useCallback(() => {\n    if (!queries.source || decodeURIComponent(queries.source).length === 0) {\n      setStatus('invalid')\n    } else {\n      setStatus('loading')\n\n      Papa.parse(queries.source, {\n        download: true,\n        complete: (result) => {\n          const parsedCSV = parseCsvArray(result.data)\n          updateStorage({\n            title: parsedCSV.title,\n            subtitle: parsedCSV.subtitle,\n            storage,\n            source: queries.source\n          })\n\n          setTitle(parsedCSV.title)\n          setSubtitle(parsedCSV.subtitle)\n          setLabelColor(parsedCSV.labelColor)\n          setEvents(parsedCSV.events)\n          setStatus('success')\n\n          window.eventElements = window.document.getElementsByClassName('Event')\n          updateVisibleEventIDs()\n          window.addEventListener('scroll', updateVisibleEventIDs)\n          window.setTimeout(() => {\n            setStatus('standby')\n          }, 5000)\n        },\n        error: (error) => {\n          console.error(error)\n        }\n      })\n    }\n  }, [queries.source])\n  useEffect(() => {\n    startApp()\n    return () => {\n      delete window.eventElements\n      window.removeEventListener('scroll', updateVisibleEventIDs)\n    }\n  }, [queries.source])\n\n  const [showSidebar, setShowSidebar] = useState(false)\n  const toggleSidebar = () => {\n    setShowSidebar(prev => !prev)\n  }\n\n  const scrollReset = useCallback((direction) => {\n    props.history.push(`${props.location.pathname}${props.location.search}`)\n    if (direction === 'top') {\n      window.scrollTo(0, 0)\n    } else if (direction === 'bottom') {\n      window.scrollTo(0, window.document.body.scrollHeight)\n    }\n  }, [props.history, props.location.pathname, props.location.search])\n\n  // for sticky menu\n  const [contextRef, setContextRef] = useState(null)\n  const handleContextRef = (contextRef) => {\n    setContextRef(contextRef)\n  }\n\n  const isAvailable = queries.source && events.length > 0\n  const memoizedTimeline = useMemo(() => (\n    <Timeline\n      handleContextRef={handleContextRef}\n      scrollReset={scrollReset}\n      queries={queries}\n      events={events}\n      firstStagedEventIndex={firstStagedEventIndex}\n      lastStagedEventIndex={lastStagedEventIndex}\n      visibleEventIDs={visibleEventIDs}\n      contextRef={contextRef} />\n  ), [queries, events, firstStagedEventIndex, lastStagedEventIndex, visibleEventIDs, contextRef])\n  return (\n    <div className='App' style={showSidebar ? {left: '20rem'} : {}} >\n      <Sidebar onCurrentClick={toggleSidebar} />\n      <main className='App-main'>\n        <Header logo={logo}\n          title={isAvailable ? title : SETTINGS.title}\n          subtitle={isAvailable ? subtitle : SETTINGS.subtitle}\n          status={status}\n          onIconClick={startApp}\n          onLogoClick={toggleSidebar} />\n        <section className='Body-wrapper ui container'>\n          {isAvailable ? (\n            <LabelColorContextProvider value={labelColor}>\n              <FilterContextProvider>\n                {memoizedTimeline}\n              </FilterContextProvider>\n            </LabelColorContextProvider>\n          ) : (\n            <Home />\n          )}\n        </section>\n        <hr className='ui divider' />\n        <Footer />\n      </main>\n    </div>\n  )\n}\n\nexport default withRouter(App)\n","import {SETTINGS} from '../_shared'\n\nexport default ({title, subtitle, storage, source}) => {\n  const history = JSON.parse(storage.getItem(SETTINGS.title))\n  history[source] = {\n    title: title,\n    subtitle: subtitle,\n    time: Date.now()\n  }\n  for (const entry in history) {\n    if (!entry.match(/^http/) || history[entry].title.includes('<!DOCTYPE html>')\n    ) {\n      delete history[entry]\n    }\n  }\n  storage.setItem(SETTINGS.title, JSON.stringify(history))\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nimport {SETTINGS} from './_shared'\nimport {App} from './App/'\nimport './index.css'\n\nimport registerServiceWorker from './registerServiceWorker'\n\nReactDOM.render(<Router basename={SETTINGS.baseUrl}><App /></Router>, document.getElementById('root'))\nregisterServiceWorker()\n"],"sourceRoot":""}